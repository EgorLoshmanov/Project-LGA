# Lattice Gas Automaton (LGA) — FHP-II Simulation

Этот проект реализует двумерную симуляцию клеточного газового автомата (Lattice Gas Automata, LGA) по модели **FHP-II** на языке **C**.  
Он демонстрирует поведение частиц газа в дискретной решётке, учитывая столкновения, отражения и источник потока.

---

## Особенности реализации

- Решётка размером `N x N`, где каждая клетка содержит частицы в 8 направлениях.
- Поддержка **периодических границ** по вертикали.
- **Столкновения** частиц по упрощённой модели FHP-II.
- **Отражение** от препятствий с изменением направления.
- **Источник частиц** на левой границе.
- Текстовая визуализация состояния решётки.
- Подсчёт **средней плотности** и **среднего вектора скорости**.
- Сохранение финального состояния в бинарный файл `grid.bin`.

---

## Компиляция

```bash
gcc -o lga_simulation LGAproject.c
```

---

## Запуск

```bash
./lga_simulation
```

Программа запросит:

1. Размер решётки (от 1 до 64)
2. Плотность частиц `p` (например, `0.3`)
3. Кол-во шагов симуляции
4. Координаты и размеры препятствия: `x y w h`

---

## Выходные данные

- Консольный вывод:
  - Текстовое состояние решётки до и после симуляции.
  - Средняя плотность и вектор скорости, например:  
    ```
    Density: 1.18  
    Velocity: (0.42, -0.01)
    ```

- Файл `grid.bin`:
  - Бинарное представление финального состояния (для возможного последующего анализа или визуализации).

---

## Структура проекта

| Функция                 | Назначение                                                  |
|-------------------------|-------------------------------------------------------------|
| `initialize_lattice`    | Инициализирует решётку с частицами по плотности `p`         |
| `add_obstacle`          | Устанавливает прямоугольное препятствие в решётке           |
| `collisions`            | Обрабатывает локальные столкновения частиц по FHP-II        |
| `reflect`               | Вычисляет отражённое направление                            |
| `processing_reflection`| Обрабатывает отражения от препятствий                        |
| `update_lattice`        | Переносит частицы в соседние клетки по направлению          |
| `particle_source`       | Генерирует частицы на левой границе                          |
| `stats`                 | Подсчитывает плотность и среднюю скорость                    |
| `save`                  | Сохраняет результат в `grid.bin`                            |

---

## Теория

- FHP-II — расширение базовой модели LGA с 8 направлениями.
- Работает как упрощённая модель течения жидкости.
- Подробнее:  
  - Frisch et al., *Lattice-Gas Automata for the Navier-Stokes Equation*, 1986  
  - Wolf-Gladrow, *Lattice-Gas Cellular Automata and Lattice Boltzmann Models*

---

## Пример

Пример ввода:
```
Размер решётки: 5
Плотность: 0.2
Шаги: 3
Препятствие: x=2 y=2 w=1 h=1
```

Вывод:
```
Начальное состояние:
. * . . .
. . # . .
* . X . .
. * . . .
. . . * .

Конечное состояние:
# * . . .
* * . . .
* . X . .
* * . . .
* . . * .

Density: 1.20
Velocity: (0.35, 0.00)
```

---

